/*
 * Copyright (c) 2019, Clarolab. All rights reserved.
 */

package com.clarolab.unit.test;

import com.clarolab.agents.errors.FailErrorProcessor;
import com.clarolab.unit.BaseUnitTest;
import org.junit.Assert;
import org.junit.Test;

public class ErrorLogUnitTest extends BaseUnitTest {

    String stackTraceCurrent = "java.lang.AssertionError: Couldn't interpret the stacktrace org.awaitility.core.ConditionTimeoutException: Condition with lambda expression in com.lithium.mineraloil.lia.admin.communityadmin.users.badge.BadgesHelper that uses int was not fulfilled within 1 minutes.    at org.awaitility.core.ConditionAwaiter.await(ConditionAwaiter.java:136)    at org.awaitility.core.CallableCondition.await(CallableCondition.java:79)    at org.awaitility.core.CallableCondition.await(CallableCondition.java:27)    at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:856)    at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:814)    at com.lithium.mineraloil.lia.admin.communityadmin.users.badge.BadgesHelper.deleteBadge(BadgesHelper.java:149)    at com.lithium.mineraloil.lia.test.responsive.badges.UserBadgeAchieveCountTest.afterTest(UserBadgeAchieveCountTest.java:60)    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)    at java.lang.reflect.Method.invoke(Method.java:497)    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:515)    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)    at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.lambda$invokeAfterAllMethods$9(ClassTestDescriptor.java:387)    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:72)    at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.lambda$invokeAfterAllMethods$10(ClassTestDescriptor.java:386)    at java.util.ArrayList.forEach(ArrayList.java:1249)    at java.util.Collections$UnmodifiableCollection.forEach(Collections.java:1080)    at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.invokeAfterAllMethods(ClassTestDescriptor.java:386)    at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.after(ClassTestDescriptor.java:217)    at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.after(ClassTestDescriptor.java:74)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:119)    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:72)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:119)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:71)    at java.util.ArrayList.forEach(ArrayList.java:1249)    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:110)    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:72)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:95)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:71)    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)    at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:155)    at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:134)    at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)    at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)\n" +
            "\tat com.clarolab.functional.test.ErrorLogsFunctionalTest.errorStackParseTests(ErrorLogsFunctionalTest.java:182)\n" +
            "********************************************\n" +
            "2019-05-13 12:32:17,200 INFO  [main] org.springframework.test.context.transaction.TransactionContext: Began transaction (1) for test context [DefaultTestContext@3877161c testClass = ErrorLogsFunctionalTest, testInstance = com.clarolab.functional.test.ErrorLogsFunctionalTest@51e7b595, testMethod = errorStackParseTests@ErrorLogsFunctionalTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@750b856c testClass = ErrorLogsFunctionalTest, locations = '{}', classes = '{class com.clarolab.QAReportApplication, class com.clarolab.QAReportApplication}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@6fe7aac8, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@76908cc0, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6e4784bc, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@1ddf84b8], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@6e620fa9]; rollback [true]\n" +
            "2019-05-13 12:32:18,038 INFO  [main] org.springframework.test.context.transaction.TransactionContext: Rolled back transaction for test: [DefaultTestContext@3877161c testClass = ErrorLogsFunctionalTest, testInstance = com.clarolab.functional.test.ErrorLogsFunctionalTest@51e7b595, testMethod = errorStackParseTests@ErrorLogsFunctionalTest, testException = java.lang.AssertionError: Couldn't interpret the stacktrace org.awaitility.core.ConditionTimeoutException: Condition with lambda expression in com.lithium.mineraloil.lia.admin.communityadmin.users.badge.BadgesHelper that uses int was not fulfilled within 1 minutes.    at org.awaitility.core.ConditionAwaiter.await(ConditionAwaiter.java:136)    at org.awaitility.core.CallableCondition.await(CallableCondition.java:79)    at org.awaitility.core.CallableCondition.await(CallableCondition.java:27)    at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:856)    at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:814)    at com.lithium.mineraloil.lia.admin.communityadmin.users.badge.BadgesHelper.deleteBadge(BadgesHelper.java:149)    at com.lithium.mineraloil.lia.test.responsive.badges.UserBadgeAchieveCountTest.afterTest(UserBadgeAchieveCountTest.java:60)    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)    at java.lang.reflect.Method.invoke(Method.java:497)    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:515)    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)    at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.lambda$invokeAfterAllMethods$9(ClassTestDescriptor.java:387)    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:72)    at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.lambda$invokeAfterAllMethods$10(ClassTestDescriptor.java:386)    at java.util.ArrayList.forEach(ArrayList.java:1249)    at java.util.Collections$UnmodifiableCollection.forEach(Collections.java:1080)    at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.invokeAfterAllMethods(ClassTestDescriptor.java:386)    at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.after(ClassTestDescriptor.java:217)    at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.after(ClassTestDescriptor.java:74)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:119)    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:72)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:119)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:71)    at java.util.ArrayList.forEach(ArrayList.java:1249)    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:110)    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:72)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:95)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:71)    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)    at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:155)    at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:134)    at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)    at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417), mergedContextConfiguration = [WebMergedContextConfiguration@750b856c testClass = ErrorLogsFunctionalTest, locations = '{}', classes = '{class com.clarolab.QAReportApplication, class com.clarolab.QAReportApplication}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@6fe7aac8, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@76908cc0, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6e4784bc, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@1ddf84b8], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]\n";

    String stackTracePrevious = "java.lang.AssertionError: Couldn't interpret the stacktrace org.awaitility.core.ConditionTimeoutException: Condition with lambda expression in com.lithium.mineraloil.lia.admin.communityadmin.users.badge.BadgesHelper that uses int was not fulfilled within 1 minutes.    at org.awaitility.core.ConditionAwaiter.await(ConditionAwaiter.java:136)    at org.awaitility.core.CallableCondition.await(CallableCondition.java:79)    at org.awaitility.core.CallableCondition.await(CallableCondition.java:27)    at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:856)    at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:814)    at com.lithium.mineraloil.lia.admin.communityadmin.users.badge.BadgesHelper.deleteBadge(BadgesHelper.java:149)    at com.lithium.mineraloil.lia.test.responsive.badges.UserBadgeAchieveCountTest.afterTest(UserBadgeAchieveCountTest.java:60)    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)    at java.lang.reflect.Method.invoke(Method.java:497)    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:515)    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)    at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.lambda$invokeAfterAllMethods$9(ClassTestDescriptor.java:387)    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:72)    at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.lambda$invokeAfterAllMethods$10(ClassTestDescriptor.java:386)    at java.util.ArrayList.forEach(ArrayList.java:1249)    at java.util.Collections$UnmodifiableCollection.forEach(Collections.java:1080)    at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.invokeAfterAllMethods(ClassTestDescriptor.java:386)    at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.after(ClassTestDescriptor.java:217)    at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.after(ClassTestDescriptor.java:74)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:119)    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:72)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:119)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:71)    at java.util.ArrayList.forEach(ArrayList.java:1249)    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:110)    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:72)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:95)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:71)    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)    at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:155)    at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:134)    at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)    at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)\n" +
            "\tat com.clarolab.functional.test.ErrorLogsFunctionalTest.errorStackParseTests(ErrorLogsFunctionalTest.java:182)\n" +
            "********************************************\n" +
            "2019-05-13 11:46:37,692 INFO  [main] org.springframework.test.context.transaction.TransactionContext: Began transaction (1) for test context [DefaultTestContext@5ebb736b testClass = ErrorLogsFunctionalTest, testInstance = com.clarolab.functional.test.ErrorLogsFunctionalTest@705ef9d5, testMethod = errorStackParseTests@ErrorLogsFunctionalTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6acb1da testClass = ErrorLogsFunctionalTest, locations = '{}', classes = '{class com.clarolab.QAReportApplication, class com.clarolab.QAReportApplication}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@6fe7aac8, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@76908cc0, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6e4784bc, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@1ddf84b8], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@7b842e79]; rollback [true]\n" +
            "2019-05-13 11:46:38,439 INFO  [main] org.springframework.test.context.transaction.TransactionContext: Rolled back transaction for test: [DefaultTestContext@5ebb736b testClass = ErrorLogsFunctionalTest, testInstance = com.clarolab.functional.test.ErrorLogsFunctionalTest@705ef9d5, testMethod = errorStackParseTests@ErrorLogsFunctionalTest, testException = java.lang.AssertionError: Couldn't interpret the stacktrace org.awaitility.core.ConditionTimeoutException: Condition with lambda expression in com.lithium.mineraloil.lia.admin.communityadmin.users.badge.BadgesHelper that uses int was not fulfilled within 1 minutes.    at org.awaitility.core.ConditionAwaiter.await(ConditionAwaiter.java:136)    at org.awaitility.core.CallableCondition.await(CallableCondition.java:79)    at org.awaitility.core.CallableCondition.await(CallableCondition.java:27)    at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:856)    at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:814)    at com.lithium.mineraloil.lia.admin.communityadmin.users.badge.BadgesHelper.deleteBadge(BadgesHelper.java:149)    at com.lithium.mineraloil.lia.test.responsive.badges.UserBadgeAchieveCountTest.afterTest(UserBadgeAchieveCountTest.java:60)    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)    at java.lang.reflect.Method.invoke(Method.java:497)    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:515)    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)    at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.lambda$invokeAfterAllMethods$9(ClassTestDescriptor.java:387)    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:72)    at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.lambda$invokeAfterAllMethods$10(ClassTestDescriptor.java:386)    at java.util.ArrayList.forEach(ArrayList.java:1249)    at java.util.Collections$UnmodifiableCollection.forEach(Collections.java:1080)    at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.invokeAfterAllMethods(ClassTestDescriptor.java:386)    at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.after(ClassTestDescriptor.java:217)    at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.after(ClassTestDescriptor.java:74)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:119)    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:72)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:119)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:71)    at java.util.ArrayList.forEach(ArrayList.java:1249)    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:110)    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:72)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:95)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:71)    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)    at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:155)    at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:134)    at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)    at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417), mergedContextConfiguration = [WebMergedContextConfiguration@6acb1da testClass = ErrorLogsFunctionalTest, locations = '{}', classes = '{class com.clarolab.QAReportApplication, class com.clarolab.QAReportApplication}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@6fe7aac8, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@76908cc0, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6e4784bc, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@1ddf84b8], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]\n";

    String errorDetailCurrent = "java.lang.AssertionError - Couldn't interpret the stacktrace org.awaitility.core.ConditionTimeoutException: Condition with lambda expression in com.lithium.mineraloil.lia.admin.communityadmin.users.badge.BadgesHelper that uses int was not fulfilled within 1 minutes.    at org.awaitility.core.ConditionAwaiter.await(ConditionAwaiter.java:136)    at org.awaitility.core.CallableCondition.await(CallableCondition.java:79)    at org.awaitility.core.CallableCondition.await(CallableCondition.java:27)    at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:856)    at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:814)    at com.lithium.mineraloil.lia.admin.communityadmin.users.badge.BadgesHelper.deleteBadge(BadgesHelper.java:149)    at com.lithium.mineraloil.lia.test.responsive.badges.UserBadgeAchieveCountTest.afterTest(UserBadgeAchieveCountTest.java:60)    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)    at java.lang.reflect.Method.invoke(Method.java:497)    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:515)    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)    at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.lambda$invokeAfterAllMethods$9(ClassTestDescriptor.java:387)    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:72)    at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.lambda$invokeAfterAllMethods$10(ClassTestDescriptor.java:386)    at java.util.ArrayList.forEach(ArrayList.java:1249)    at java.util.Collections$UnmodifiableCollection.forEach(Collections.java:1080)    at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.invokeAfterAllMethods(ClassTestDescriptor.java:386)    at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.after(ClassTestDescriptor.java:217)    at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.after(ClassTestDescriptor.java:74)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:119)    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:72)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:119)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:71)    at java.util.ArrayList.forEach(ArrayList.java:1249)    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:110)    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:72)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:95)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:71)    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)    at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:155)    at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:134)    at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)    at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)";

    String errorDetailPrevious = "java.lang.AssertionError - Couldn't interpret the stacktrace org.awaitility.core.ConditionTimeoutException: Condition with lambda expression in com.lithium.mineraloil.lia.admin.communityadmin.users.badge.BadgesHelper that uses int was not fulfilled within 1 minutes.    at org.awaitility.core.ConditionAwaiter.await(ConditionAwaiter.java:136)    at org.awaitility.core.CallableCondition.await(CallableCondition.java:79)    at org.awaitility.core.CallableCondition.await(CallableCondition.java:27)    at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:856)    at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:814)    at com.lithium.mineraloil.lia.admin.communityadmin.users.badge.BadgesHelper.deleteBadge(BadgesHelper.java:149)    at com.lithium.mineraloil.lia.test.responsive.badges.UserBadgeAchieveCountTest.afterTest(UserBadgeAchieveCountTest.java:60)    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)    at java.lang.reflect.Method.invoke(Method.java:497)    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:515)    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)    at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.lambda$invokeAfterAllMethods$9(ClassTestDescriptor.java:387)    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:72)    at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.lambda$invokeAfterAllMethods$10(ClassTestDescriptor.java:386)    at java.util.ArrayList.forEach(ArrayList.java:1249)    at java.util.Collections$UnmodifiableCollection.forEach(Collections.java:1080)    at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.invokeAfterAllMethods(ClassTestDescriptor.java:386)    at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.after(ClassTestDescriptor.java:217)    at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.after(ClassTestDescriptor.java:74)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:119)    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:72)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:119)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:71)    at java.util.ArrayList.forEach(ArrayList.java:1249)    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:110)    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:72)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:95)    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:71)    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)    at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:155)    at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:134)    at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)    at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)";

    @Test
    public void errorDetailsEquals() {
        Assert.assertEquals(errorDetailCurrent, errorDetailPrevious);
    }

    @Test
    public void stackTraceNotEquals() {
        Assert.assertNotEquals(stackTraceCurrent, stackTracePrevious);
    }

    @Test
    public void stackTraceCleanedEquals() {
        FailErrorProcessor failErrorProcessor = new FailErrorProcessor();
        String cleanStackTextCurrent = failErrorProcessor.cleanStackText(stackTraceCurrent);
        String cleanStackTextPrevious = failErrorProcessor.cleanStackText(stackTracePrevious);
        Assert.assertEquals(cleanStackTextCurrent.substring(0, 2000), cleanStackTextPrevious.substring(0, 2000));
    }

    @Test
    public void errorDetailCleanedEquals() {
        FailErrorProcessor failErrorProcessor = new FailErrorProcessor();
        String cleanDetailCurrent = failErrorProcessor.cleanStackText(errorDetailCurrent);
        String cleanDetailPrevious = failErrorProcessor.cleanStackText(errorDetailPrevious);
        Assert.assertEquals(cleanDetailCurrent, cleanDetailPrevious);
    }


}
